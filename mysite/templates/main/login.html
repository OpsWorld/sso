<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>{{title}}</title>
    <link href="/static/favicon.ico" rel="shortcut icon">
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.5 -->
    <link rel="stylesheet" href="/static/AdminLTE-2.3.0/bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="/static/AdminLTE-2.3.0/dist/css/AdminLTE.min.css">
    <!-- iCheck -->
    <link rel="stylesheet" href="/static/AdminLTE-2.3.0/plugins/iCheck/square/blue.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body class="hold-transition login-page">
    <div class="login-box">
      <div class="login-logo">
        <a href="#"><img src="/static/img/logo.png"></a>
      </div><!-- /.login-logo -->
      <div class="login-box-body">
        <h2 style="text-align:center">SSO统一认证平台</h2>
        <p class="login-box-msg"></p>
        <form action="" method="post">
          <div class="form-group has-feedback">
            <input name='username' class="form-control" placeholder="用户名">
            <span class="glyphicon glyphicon-user form-control-feedback"></span>
          </div>
          <div class="form-group has-feedback">
            <input name='password' type="password" class="form-control" placeholder="密码">
            <span class="glyphicon glyphicon-lock form-control-feedback"></span>
          </div>
        {% if show_captcha %}
         <div class="row">
            <div class="col-xs-4">
            <span class="input-group-addon"><img src="/sso/captcha.html" id="captcha" style="cursor:pointer"></span>
            </div>
            <div class="col-xs-8">
                <div class="form-group has-feedback">
                <input name="code" class="form-control width:50%" placeholder="验证码">
                <span class="glyphicon glyphicon-check form-control-feedback"></span>
                </div>
            </div>
         </div>
        {% endif %}
          <div class="row">
            <div class="col-xs-8">
              <div class="checkbox icheck">
                <label>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox"> 记住密码
                  <a class="help-inline" href="{{passwd_url}}">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;忘记密码？</a>
                </label>
              </div>

            </div><!-- /.col -->
            <div class="col-xs-4">
              <button type="submit" id='submit' class="btn btn-primary btn-block btn-flat" onclick="return check(this.form)">登录</button>
            </div><!-- /.col -->
          </div>
        </form>
            <div id="result" class="pull-left" style="color: red;">{{result}}</div>
      </div><!-- /.login-box-body -->
    </div><!-- /.login-box -->

    <!-- jQuery 2.1.4 -->
    <script src="/static/AdminLTE-2.3.0/plugins/jQuery/jQuery-2.1.4.min.js"></script>
    <!-- Bootstrap 3.3.5 -->
    <script src="/static/AdminLTE-2.3.0/bootstrap/js/bootstrap.min.js"></script>
    <!-- iCheck -->
    <script src="/static/AdminLTE-2.3.0/plugins/iCheck/icheck.min.js"></script>
<script type="text/javascript">
function check(form) {
    var username = $.trim($("input[name='username']").val());
    var password = $.trim($("input[name='password']").val());
    var checkSubmit = true;
    if (username == "") {
        $('#result').html("用戶名不能空");
        checkSubmit = false;
    } else if (password == "") {
        $('#result').html("密码不能为空");
        checkSubmit = false;
    } else if ($("input[name='code']").length > 0 && $("input[name='code']").val() == "") {
        $('#result').html("验证码不能空");
        checkSubmit = false;   
    }
    return checkSubmit;
}
$(document).ready(function(){
    $("#captcha").click(function(){
        document.getElementById("captcha").src="/sso/captcha.html?t=" + Math.random();
    });
 });
</script>
  </body>
</html>
